<div class="container pt-4 cart-bg">
  <h4 class="mb-3 fw-semibold d-flex align-items-center">
    <i class="fas fa-shopping-cart me-2"></i>
    Shopping Cart
  </h4>

  <!-- Empty Cart Message -->
  <div *ngIf="cartItems.length === 0" class="text-center py-5">
    <i class="fas fa-shopping-cart fa-2x text-muted mb-2"></i>
    <h6>Your cart is empty</h6>
    <p class="text-muted small">Looks like you haven't added any books to your cart yet.</p>
    <a routerLink="/dashboard" class="btn btn-primary btn-sm mt-2">
      <i class="fas fa-book me-1"></i>
      Continue Shopping
    </a>
  </div>

  <!-- Cart Items -->
  <div *ngIf="cartItems.length > 0" class="row g-3">
    <!-- Cart Items List -->
    <div class="col-lg-8">
      <div class="card shadow-sm mb-3 border-0 rounded-4">
        <div class="card-body p-3">
          <div class="table-responsive">
            <table class="table align-middle mb-0 small">
              <thead>
                <tr class="text-muted">
                  <th class="fw-normal">PRODUCT</th>
                  <th class="fw-normal">PRICE</th>
                  <th class="fw-normal">QUANTITY</th>
                  <th class="fw-normal">TOTAL</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of cartItems">
                  <td>
                    <div class="d-flex align-items-center">
                      <img
                        [src]="item.image"
                        [alt]="item.title"
                        class="img-thumbnail me-2 cart-thumb"
                        style="width: 48px; height: 48px; object-fit: cover"
                      />
                      <div>
                        <div class="fw-semibold">{{ item.title }}</div>
                        <small class="text-muted">by {{ item.author }}</small>
                      </div>
                    </div>
                  </td>
                  <td>${{ item.price.toFixed(2) }}</td>
                  <td>
                    <div
                      class="input-group input-group-sm flex-nowrap"
                      style="width: 90px"
                      role="group"
                      aria-label="Quantity selector for {{ item.name }}"
                    >
                      <button
                        type="button"
                        class="btn btn-outline-secondary btn-sm px-2"
                        (click)="updateQuantity(item, -1)"
                        title="Decrease quantity"
                        aria-label="Decrease quantity"
                      >
                        <i class="fas fa-minus"></i>
                      </button>

                      <input
                        type="number"
                        class="form-control text-center form-control-sm w-50"
                        [value]="item.quantity"
                      />

                      <button
                        type="button"
                        class="btn btn-outline-secondary btn-sm px-2"
                        (click)="updateQuantity(item, 1)"
                        title="Increase quantity"
                        aria-label="Increase quantity"
                      >
                        <i class="fas fa-plus"></i>
                      </button>
                    </div>
                  </td>
                  <td>${{ (item.price * item.quantity).toFixed(2) }}</td>
                  <td>
                    <button class="btn btn-link text-danger p-0" (click)="removeItem(item)">
                      <i class="fas fa-trash-alt"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="col-lg-4">
      <div class="card shadow-sm border-0 rounded-4">
        <div class="card-body p-4">
          <h6 class="card-title mb-3 fw-semibold">Order Summary</h6>
          <div class="d-flex justify-content-between mb-1 small">
            <span>Subtotal</span>
            <span>${{ subtotal.toFixed(2) }}</span>
          </div>
          <div class="d-flex justify-content-between mb-1 small">
            <span>Shipping</span>
            <span>{{ shipping === 0 ? 'Free' : '$' + shipping.toFixed(2) }}</span>
          </div>
          <hr class="my-2" />
          <div class="d-flex justify-content-between mb-3">
            <strong>Total</strong>
            <strong>${{ total.toFixed(2) }}</strong>
          </div>
          <div class="d-grid gap-2">
            <button class="btn btn-primary btn-sm rounded-pill" routerLink="/checkout">
              <i class="fas fa-credit-card me-1"></i>
              Proceed to Checkout
            </button>
            <button class="btn btn-outline-secondary btn-sm rounded-pill" routerLink="/dashboard">
              <i class="fas fa-arrow-left me-1"></i>
              Continue Shopping
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
